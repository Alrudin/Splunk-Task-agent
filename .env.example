# AI-Assisted Splunk TA Generator - Environment Configuration
# Copy this file to .env and update values for your environment

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql://postgres:postgres123@localhost:5432/splunk_ta_generator
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_ECHO=false  # Set to true for SQL query logging (development only)

# =============================================================================
# Redis Configuration (Celery Broker)
# =============================================================================
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/1
CELERY_TASK_TIME_LIMIT=3600  # Task timeout in seconds
CELERY_WORKER_CONCURRENCY=4

# =============================================================================
# MinIO/S3 Object Storage Configuration
# =============================================================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_BUCKET_SAMPLES=log-samples
MINIO_BUCKET_TAS=ta-artifacts
MINIO_BUCKET_DEBUG=debug-bundles
MINIO_USE_SSL=false
MINIO_REGION=us-east-1

# =============================================================================
# Pinecone Vector Database Configuration
# =============================================================================
PINECONE_API_KEY=your-pinecone-api-key
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_DOCS=splunk-docs-index
PINECONE_INDEX_TAS=ta-examples-index
PINECONE_INDEX_SAMPLES=sample-logs-index
PINECONE_DIMENSION=1536  # Embedding dimension

# =============================================================================
# Ollama LLM Configuration
# =============================================================================
OLLAMA_HOST=localhost
OLLAMA_PORT=11434
OLLAMA_MODEL=llama2  # Model to use for generation
OLLAMA_TIMEOUT=300    # Request timeout in seconds
OLLAMA_TEMPERATURE=0.7
OLLAMA_MAX_TOKENS=4096

# =============================================================================
# Authentication & Security
# =============================================================================
JWT_SECRET_KEY=your-secret-key-change-in-production-use-openssl-rand-hex-32
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=60
JWT_REFRESH_EXPIRATION_DAYS=7

# Authentication Providers
SAML_ENABLED=false
SAML_METADATA_URL=
SAML_ENTITY_ID=

OAUTH_ENABLED=false
OAUTH_CLIENT_ID=
OAUTH_CLIENT_SECRET=
OAUTH_AUTHORIZE_URL=
OAUTH_TOKEN_URL=
OAUTH_USER_INFO_URL=

OIDC_ENABLED=false
OIDC_CLIENT_ID=
OIDC_CLIENT_SECRET=
OIDC_DISCOVERY_URL=

LOCAL_AUTH_ENABLED=true  # Enable local username/password authentication

# =============================================================================
# System Configuration
# =============================================================================
SAMPLE_RETENTION_ENABLED=true  # Whether to retain uploaded log samples
SAMPLE_RETENTION_DAYS=90       # How long to keep samples
MAX_PARALLEL_VALIDATIONS=3     # Maximum concurrent Splunk validation containers
MAX_SAMPLE_SIZE_MB=500         # Maximum upload size for log samples
ALLOWED_WEB_DOMAINS=splunk.com,splunkbase.splunk.com,github.com
BLOCKED_WEB_DOMAINS=           # Comma-separated list of blocked domains

# =============================================================================
# Logging Configuration
# =============================================================================
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_FORMAT=json  # json or text
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_RETENTION_DAYS=365
ENABLE_DEBUG_LOGGING=false
DEBUG_LOG_FILE=/var/log/splunk-ta-generator/debug.log

# =============================================================================
# Application Configuration
# =============================================================================
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_WORKERS=4  # Number of Uvicorn workers
FRONTEND_URL=http://localhost:5173
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
API_VERSION=v1
APP_NAME=Splunk TA Generator
APP_VERSION=0.1.0

# =============================================================================
# Splunk Sandbox Configuration
# =============================================================================
SPLUNK_IMAGE=splunk/splunk:latest
SPLUNK_LICENSE_ACCEPTANCE=yes
SPLUNK_ADMIN_PASSWORD=changeme123
SPLUNK_HTTP_PORT=8000
SPLUNK_MANAGEMENT_PORT=8089
SPLUNK_VALIDATION_TIMEOUT=300  # Seconds to wait for validation completion
KUBERNETES_NAMESPACE=splunk-validation  # For K8s deployments

# =============================================================================
# Email/Notification Configuration
# =============================================================================
SMTP_ENABLED=false
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=notifications@example.com
SMTP_PASSWORD=
SMTP_FROM=noreply@example.com
SMTP_USE_TLS=true
NOTIFICATION_ENABLED=true

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_AUTO_APPROVE=false  # Auto-approve requests (development only)
FEATURE_MANUAL_OVERRIDE=true
FEATURE_DEBUG_BUNDLES=true
FEATURE_KNOWLEDGE_MANAGEMENT=true
FEATURE_METRICS_DASHBOARD=true

# =============================================================================
# Performance Tuning
# =============================================================================
REQUEST_TIMEOUT=60  # API request timeout in seconds
UPLOAD_CHUNK_SIZE=1048576  # 1MB chunks for file uploads
MAX_CONTENT_LENGTH=524288000  # 500MB max request size